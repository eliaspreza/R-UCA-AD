<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Análisis Demográfico Aplicado, Tendenicas para El Salvador</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Articulo_files/libs/clipboard/clipboard.min.js"></script>
<script src="Articulo_files/libs/quarto-html/quarto.js"></script>
<script src="Articulo_files/libs/quarto-html/popper.min.js"></script>
<script src="Articulo_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Articulo_files/libs/quarto-html/anchor.min.js"></script>
<link href="Articulo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Articulo_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Articulo_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Articulo_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Articulo_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análisis Demográfico Aplicado, Tendenicas para El Salvador</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>UNIVERSIDAD CENTROAMERICANA JOSÉ SIMEÓN CAÑAS <strong>(UCA)</strong> </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p><img src="Imagenes/LogoUCAazul.jpg" class="img-fluid" width="95"></p>
<section id="name-author-2" class="level1">
<h1>- name: Author 2</h1>
</section>
<section id="affiliation-department-of-zzz-university-of-www" class="level1">
<h1>affiliation: Department of ZZZ, University of WWW</h1>
<p>keywords: - Marchas, Bitcoin, El 15Marchamos, Chivo, Pueblo, Resistencia y Dictadura abstract: | La plataforma predilecta del Presidente, la red social de twitter, se ha convertido ahora en el terreno fertil en donde la __Resistencia__ ha superado la retórica y el mensaje del Oficialismo, la carga emotiva y polaridad que muestran las últimas coyunturas políticas revelan que el sentimiento negativo creció por arriba del 51% y los sentimientos positivos mostrados en la polaridad hacia la narrativa Gubernamental se han desplomado un 31%, teniendo una baja de 20 puntos en tan solo 7 meses de gestión a partir de Febrero 2021, de igual forma el sentimiento de neutralidad esta creciendo cada día más.</p>
<p>bibliography: bibliography.bib output: rticles::asa_article editor_options:</p>
<p>chunk_output_type: console format: pdf: toc: true toc-title: Índice number-sections: true colorlinks: true ---</p>
<p>La demografía es una ciencia que tiene como objeto de análisis e investigación científica a la población; entendida ésta como un conjunto de individuos, constituido de forma estable, ligado por vínculos de reproducción e identificado por características territoriales, políticas, jurídicas, étnicas o religiosas” (Livi-Bacci, 1993: 9). La unidad estadística mínima de observación de la demografía es <strong>el individuo</strong> <span class="citation" data-cites="Izcara2009">[@Izcara2009]</span>;</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Acotado el concepto de población, la demografía <strong>puede definirse como una ciencia social</strong> que mide y explica los acontecimientos y procesos determinantes de la formación, la conservación, el crecimiento o incluso la desaparición de las poblaciones. El primer aspecto, la medición de la dinámica de las poblaciones, se denomina análisis demográfico.</p>
</div>
</div>
<p>Otro concepto dado por CEPAL <span class="citation" data-cites="cepal2014datos">[@cepal2014datos]</span>:</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Si se recurre a la definición de la demografía como la “ciencia cuyo objeto es el estudio de las poblaciones humanas y que trata de su dimensión, estructura, evolución y caracteres generales, considerados principalmente desde un punto de vista cuantitativo” (Naciones Unidas e IUSSP, 1985, pág. 10), ya se tiene prácticamente determinado el alcance de los datos básicos que se manejarán. La demografía, en esencia, no es otra cosa que el estudio de la dimensión y composición de las poblaciones humanas, y principalmente de sus mecanismos de evolución</p>
</div>
</div>
<p>No es coincidencia que un político tenga el mayor número de seguidores, la cuenta de Barack Obama posee más de 129 millones de seguidores, luego le sigue un artista como Justin Bieber con 114 millones de followers y la cuenta de Cristiano Ronaldo un famoso futbolista esta entre los 5 mayores cuentas de twitter que son seguidas, con 91 millones de followers. Tal como se puede observar en el siguiente gráfico:</p>
<p>Según fuentes del sitio Brandwatch: <a href="https://www.brandwatch.com/es/blog/116-estadisticas-de-las-redes-sociales/" class="uri">https://www.brandwatch.com/es/blog/116-estadisticas-de-las-redes-sociales/</a>, entre algunas de las estadísticas de la red social se pueden detallar las siguientes: 500 millones de personas visitan Twitter cada mes sin hacer login; hay un total de 1,3 mil millones de cuentas, pero solo 328 millones están activas.; se envían 500 millones de tuits cada día, o lo que es lo mismo, 6000 tuits al segundo; el 65.8% de las empresas americanas con más de 100 empleados utilizan Twitter para sus acciones de marketing, entre otras. Según fuentes de Statista <a href="https://www.statista.com/" class="uri">https://www.statista.com/</a>, el 38.5% de los usuarios en Twitter hasta Abril del 2021 poseían edades entre los 25-34 años siendo el mayor número de consumidores del contenido de la red, seguidos por el rango de edades de 35-49 años con un 20.7%, tal como lo muestra el siguiente gráfico:</p>
<p>Algunos ejemplos de esta técnica de análisis de sentimiento en twitter aplicada a la política que son citados a continuación son retomados de <span class="citation" data-cites="alva2021analisis">[@alva2021analisis]</span>:</p>
<p><strong>Elecciones Presidenciales Norteamericanas 2016</strong>: El conflicto político entre Hillary Clinton y Donald Trump se reflejó en las discusiones entre los usuarios en las redes sociales como Twitter. Aunque los twitts de los candidatos pueden llegar a un gran número de seguidores, los debates disputados en twitter y en otras redes sociales mostraron que no todos los usuarios tuvieron el mismo sentimiento con respecto a los mensajes que fueron enviados por los candidatos en ese momento. Para el estudio se recolectaron 4.9 millones de twitts publicados por 18,450 usuarios, sus perfiles y sus relaciones con otros usuarios, en ese entonces <span class="math inline">\(@realDonaldTrump\)</span> era seguido por 17.1 millones de personas y <span class="math inline">\(@HillaryClinton\)</span> era seguida por 11.6 millones; el análisis se desarrolló usando la herramienta de Stanford Parser.</p>
<p><strong>Elecciones Presidenciales Austriacas 2016</strong>: también se realizaron estudios sobre las elecciones austriacas en el 2016 utilizando ciencia de redes y análisis de sentimientos utilizando Twitter. En las elecciones presidenciales del 2016, Austria fue testigo de las opiniones polarizadas entre sus ciudadanos, el Partido de la Libertad de Austria con Norbert Hofer, y su candidato opositor, un ex-miembro del Partido Verde, Alexander Van de Bellen se enfrascaron en una lucha por la presidencia. En éste análisis se encontró un patrón claro que los twitts emocionales (tanto negativos como positivos) se retwittean.</p>
<p>En ese proyecto se utilizó SentiStrenght <a href="https://nlp.stanford.edu/software/lex-parser.shtml" class="uri">https://nlp.stanford.edu/software/lex-parser.shtml</a>, que se basa en un léxico de palabras sentimentales, una lista de palabras idiomáticas y una lista de emoticones. Al aplicar técnicas de Natural Language Processing NLP, se encontró evidencia de que los candidatos usaron campañas negativas para obtener más seguidores. En particular, este estudio distingue entre información errónea e información negativa, y se descubrió que la información negativa en esas elecciones en particular obtuvo un alto número de retwitts y likes. Sin embargo, también se verificó que la propagación de información errónea pudo tener efectos negativos en el candidato. Con respecto al comportamiento de tuiteo de los seguidores de los candidatos, se utilizarón técnicas de análisis de sentimientos y análisis de redes para la construcción de comunidades y examinarlos en qué temas los usuarios asociaron a los candidatos. Esos resultaron mostraron una clara distinción en cómo los usuarios percibían a los candidatos, en particular se descubrió que los hashtags con una connotación negativa se han asociaron predominantemente al candidato Norbert Hofer.</p>
<p><strong>Análisis político en Twitter durante las elecciones de Uruguay 2019</strong>: En América Latina, el caso más conocido es de las elecciones nacionales de Uruguay realizada por la editorial El País, juntamente con IGV, la cuál es una empresa tecnología dedicada a soluciones de hardware y software. El País e IGV publicaron un algoritmo de inteligencia artificial (IA) para analizar los datos del discurso de más de 30 mil usuarios que opinaron en Twitter sobre las elecciones; el proceso consto de tres pasos básicos: Recolección, Clasificación y Visualización; los resultados de éste análisis se almacenó en tiempo real, para la clasificación de los twitts utilizaron tecnología Watson de IBM como herramienta de TI, para el almacenamiento y rapidez gráfica de los datos al instante utilizaron la aplicación de la nube de IBM (IBM Cloud), en el ejercicio se analizaron segundo a segundo un total de 61,632 twitts desde las cero horas hasta las veinte tres del domingo 27 de octubre del 2019, en donde emplearon las frases de búsqueda de los términos y frases que hacen referencia a cada candidato.</p>
<p><strong>Estudio de la agencia Intelligence Compass 2010</strong>: quiénes elaboraron el Informe sobre política y Redes Sociales [Compass, 2010] en España en el 2010, una investigación que tenía por finalidad comprobar si el éxito del modelo de marketing político de Obama aplicado en Internet, se podría llegar a replicar en España. Este trabajo de campo trataba de investigar las relaciones producidas entre ambos a través de la utilización de cuatro redes sociales (Facebook, Twitter, LinkedIn y Xing). Entre las principales conclusiones de la investigación se puede mencionar: el 99% de los políticos valoraban positivamente las redes sociales y la mayor parte de ellos sabían que en el futuro estas redes jugarán un papel relevante con el ciudadano y a la postre en las elecciones. Así, un 78% de ellos valoran con un sobresaliente que las redes sociales constituyen un buen medio para llegar a la ciudadanía. Sin embargo, solo dos de cada diez 17% otorga la máxima valoración a la idea de que las redes sociales se conviertan en el eje central de la campaña. Por otra parte, cuatro de cada cinco ciudadanos entrevistados en el mismo estudio 79% aseguran tener algún político entre los contactos de sus redes sociales. De estos, la mayoría afirmaron que tienen en su red social a políticos debido a que se vinculan con ellos por amistad, pero no por política (tan solo 49 de 722 personas reconocían que seguían a los políticos en su red por afición o interés). De aquellos que declaraban no tener a políticos en sus redes, casi la mitad (47%) expresaron como motivo que no querían que les vinculasen con ningún partido. A su vez, un (65%) de los encuestados ven bien que los políticos tengan redes sociales. La mayoría (86%) considera que deben usarlas para acercarse al ciudadano.</p>
<p>En cuanto a la posibilidad de que el modelo de marketing online de Obama se pudiera replicar en España en las elecciones municipales, siete de cada diez (69%) lo consideraba poco probable. Esto era debido, principalmente, al escaso interés que la política suscita entre los ciudadanos en España. El éxito del “modelo Obama” radicó, precisamente, en la creación de interés en el ciudadano y que éste fuese quien comenzaba a moverse, es decir, a hacer el esfuerzo de ir a la web, informarse, crear ruido y animar a sus contactos a votar a uno u otro candidato.</p>
<p>A continuación se presenta un breve esbozo de la metodología aplicada en la presente investigación, tomando como referencia pasajes del escrito técnico de <span class="citation" data-cites="amat2019text">[@amat2019text]</span>; un aspecto muy importante para realizar un análisis por medio del Dataminig y Text mining en Twitter, es el empleo de herramientas y software altamente especializado en materia estadística y matemática <span class="citation" data-cites="silge2017text">[@silge2017text]</span>, uno de los más potentes software de uso libre y no privativo es el lenguaje R <span class="citation" data-cites="wickham2016r">[@wickham2016r]</span>, que posee las librerías de análisis más adecuadas para desarrollar éste tipo de estudios, se conoce que hay también aplicaciones de la misma plataforma en Twitter para desarrolladores pero tienen un costo que no esta al alcance de muchos; el objetivo de esta investigación es trazar información valiosa que facilite observar tendencias por medio de insumos de datos recogidos de muestras provenientes de twitter que evidencian el sentir de algunas opiniones que algunos usuarios emitierón acerca de la marcha del 15 de septiembre y su resistencia a la gestión del actual Gobierno, con la finalidad de aportar al debate político. Algunos conceptos que se utilizaron como referencia provienen del marco teórico empleado en la tesis de la Universidad de Chile: Análisis de Sentimientos y Predicción de Eventos en Twitter de <span class="citation" data-cites="montesinos2014analisis">[@montesinos2014analisis]</span>, los conceptos son los siguientes:</p>
<ul>
<li><p><strong>Análisis de sentimiento</strong>: Para identificar las opiniones en Internet, es necesario realizar un análisis de sentimientos, técnica que utiliza procesamiento de lenguaje, análisis de texto y herramientas computacionales para clasificar cometarios subjetivos de diferentes usuarios, ya sean sentimientos propiamente tal u opiniones sobre diversos temas. Los métodos usados para este tipo de análisis tienen cerca de 15 años de aplicación, los cuales se han usado para clasificar mails, reseñas de clientes, publicaciones digitales, etc.</p></li>
<li><p><strong>Polaridad de las opiniones en twitter</strong>: Los tweets a evaluar son todos aquellos que den una opinión, una evaluación o expresen emoción sobre algún tema de interés, dejando de lado los mensajes objetivos o informativos. Es así como existen varios métodos que se pueden aplicar para realizar un análisis de sentimientos en Twitter. En general, este tipo de problemas se resuelve catalogando una opinión en polaridades, determinando si es positiva o negativa con respecto a un tema específico. Sin embargo, este no es un tema simple de resolver, ya que dependiendo del contexto hay palabras que pueden expresar tanto una opinión positiva como negativa.</p></li>
<li><p><strong>SVM</strong>: Support vector machine (SVM) es altamente usado en la clasificación y detección de sentimientos. SVM se basa en métodos kernel, los cuales toman los datos y los ponen dentro de un espacio de características apropiado. De esta manera usan algoritmos lineales para determinar patrones no lineales. El método se basa principalmente en vectores donde, usando aprendizaje computacional, logra tomar decisiones de límite entre dos categorías separándoles lo más posible.</p></li>
<li><p><strong>Stopwords</strong>: Las stopwords son palabras que no entregan información al mensaje, estas palabras suelen ser conectores, preposiciones y artículos, las cuales son eliminadas del tweet de forma que no aparezcan en el momento de seleccionar los términos más usados, los cuales serán incluidos y analizados por el diccionario léxico-emocional.</p></li>
<li><p><strong>El método de corpus</strong>: Es posible ocupar un sistema alternativo basado en un corpus. Esta opción se basa en la coexistencia de patrones y en la sintaxis del texto. Este método parte con unos pequeños diccionarios con palabras, generalmente adjetivos, positivos y negativos, los cuales son usados para identificar otros términos que indiquen sentimientos. Para esta ocasión se varió la metodología y se limpió el vector de la base de texto de los tweets a modo que se pudiera obtener un conjunto de token por twitts los cuales fueron anidados y desanidados para ser depurados y desde allí unirlos al diccionario del léxico en español enriquecido con algunas expresiones adicionales de los mismos tweets que no estaban en el léxico de palabras que emiten un sentimiento, eliminando los stopwords y de esta manera se pudo extraer una carga emotiva por cada tweets de la base.</p></li>
<li><p><strong>Wordcloud</strong>: Podríamos decir que una nube de palabras o nube de etiquetas es un recurso visual a modo imagen que se utiliza para representar las palabras más destacadas que componen un determinado texto. Estas nubes de palabras (o nube de tags) suelen presentarse a modo de figura abstracta, en las que son representadas de un mayor tamaño aquellas palabras que aparecen con más frecuencia o son más importantes.</p></li>
</ul>
<ul>
<li><p>Para iniciar el proceso se emplearon las librerías del potente lenguaje R provenientes del repositorio CRAN R <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> (pacman, twitteR, tidyverse, tidyr, tidytext, NLP, tm, quanteda, sjmisc, SnowballC, RcolorBrewer, wordcloud, igraph, treemapify) para descargar y analizar una muestra de 118,531 que fueron completados por los 217,488 tweets adicionales, haciendo un total de <strong>299,842 tweets</strong> una muestra muy representativa en la cuál se ejecutó la lectura de la coyuntura política del momento, el acceso se logró por medio de los token para desarrolladores proporcionados por twitter.</p></li>
<li><p>Se determinaron <strong>querys</strong> para seleccionar muestras por temática, hashtag, entre ostros términos escogiendo las que poseían una buena cantidad de estimación por su cuantía de mensajes en twitter, al final se logró extraer una buena muestra a lo largo de todas las consultas.</p></li>
<li><p>La descarga del análisis comprendió los tweets emitidos en el periodo del 30 de Agosto hasta el 20 septiembre de 2021 es decir, un lapso de evaluación muy representativo por cantidad de tweets, al rededor de 22 días.</p></li>
<li><p>Aplicación de limpieza y tokenización, el proceso de limpieza de texto, dentro del ámbito de text mining, consistió en eliminar del texto todo aquello que no aporte información sobre su temática, estructura o contenido. No existe una única forma de hacerlo, depende en gran medida de la finalidad del análisis y de la fuente de la que proceda el texto. Por ejemplo, en las redes sociales los usuarios escriben de la forma que más lo prefieren, lo que suele resultar en un uso elevado de abreviaturas, signos de puntuación, iconografía y diferentes tipos de emojis. Se eliminaron los Stopwors (En definitiva, estas palabras no tienen un significado por sí solas, sino que modifican o acompañan a otras, este grupo suele estar conformado por artículos, pronombres, preposiciones, adverbios e incluso algunos verbos) y se emparejó un léxico que fue enriquecido por más palabras de la misma base de twitter, en esta ocasión no se determinó un Corpus sino más bien se empleo el vector de texto por tweet para extraer los tokens y ser depurados, lo que le da más peso al análisis porque se llego a nivel de tweets por tweets.</p></li>
<li><p>Para estimar la polarización, se emplearon los diccionarios o léxicos aportados por las librerías del lenguaje R: <a href="https://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm" class="uri">https://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm</a>, traducidos al castellanos para determinar la polaridad conforme al sentido de las palabras y se desarrolló un análisis descriptivo de la base de twitter para estimar ciertos resultados, las técnicas empleadas para el análisis de sentimiento fueron: la clasificación dicotómica de las palabras por twitts ya determinadas por el léxico y enriquecidas con más palabras de la misma muestra de twitts; los valores que se asumieron para determinar las cargas emotivas fueron: el valor 1 para los tokens o palabras con sentimiento positivo, -1 como valor para los tokens o palabras con sentimientos o connotación negativa y 0 a los neutros según el léxico.</p></li>
<li><p>Finalmente el artículo fue escrito en formato Markdown que es un lenguaje de marcado ligero creado por John Gruber que trata de conseguir la máxima legibilidad y facilidad de publicación tanto en su forma de entrada como de salida, inspirándose en muchas convenciones existentes para marcar mensajes de correo electrónico usando texto llano. Se combinó como un <strong>Rmarkdown</strong> es decir posee código de lenguaje R y Markdown.</p></li>
</ul>
<p>Los tweets para la investigación son una muestra aproximada de <strong>300 mil (299,842)</strong>, para un total de <strong>41,389 cuentas</strong> de personas y organizaciones que manifestaron sus ideas y sentimientos a lo largo de 22 días desde el 30 de Agosto al 20 de Septiembre, la importancia de conocer la tendencia y acumulación de los Tweets emitidos según fecha, es que al final proporcionan una pauta clave de los sucesos comentados por los usuarios para dichos tiempos y revelan cuándo y el porqué de una mayor actividad por parte de la comunidad; es como recoger de twitter muestras o la fotografía de los temas con mayor trending topic para esos períodos, siendo muy importante para el análisis y sustentar la carga emocional de los sentimientos de la comunidad, que al final se focalizará en los temas más álgidos o recurrentes a lo largo del período que comprende la muestra; por ejemplo el mes de Septiembre se observó mayor actividad los días <strong>08, 15 y 16 de septiembre</strong>, días claves que muestran el descontento por la entrada en vigencia de la Ley Bitcoin aprobada el 08 de Junio de 2021, esta ley de tan sólo 16 artículos fue el detonante principal para que muchas más demandas sociales se hicieran sentir en la manifestación del 15S2021, día en el cuál se observó mayor actividad en la red con un volumen que alcanzó la activación de 15,000 cuentas tan solo</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>